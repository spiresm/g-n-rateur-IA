<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>G√©n√©ration de contenu D√©monstration</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="app-shell">

    <header>
        <div style="height: 35px; width: 35px; margin-right: 20px;"></div>

        <div class="title-group">
            <h1>G√©n√©rateur de contenu IA</h1>
            <div class="title-chip">
                <span></span>
                <div>Bridge Workflow ‚Ä¢ Live Preview</div>
            </div>
        </div>

        <div class="gpu-card" id="gpu-card">
            <div class="gpu-main">
                <span class="gpu-label">CARTE GRAPHIQUE</span>
                <strong id="gpu-name">‚Äì</strong>
                <div class="gpu-pills">
                    <div class="gpu-pill">
                        <span id="gpu-util">0%</span> ‚Ä¢ Utilisation
                    </div>
                    <div class="gpu-pill">
                        <span id="gpu-mem">0 / 0 Go</span>
                    </div>
                </div>
            </div>
            <div class="gpu-status-indicator">
                <div class="gpu-dot"></div>
                <div class="gpu-value" id="gpu-temp">‚Äì ¬∞C</div>
            </div>
        </div>
    </header>

    <div class="mode-selector">
        
        <div class="mode-card active-mode" data-mode="affiche" id="mode-affiche">
            <h2>‚ú® Affiche / Poster</h2>
            <p>G√©n√©rez un poster de film ou d'√©v√©nement bas√© sur des param√®tres cr√©atifs.</p>
        </div>

        <div class="mode-card" data-mode="image" id="mode-image">
            <h2>üì∑ Image simple</h2>
            <p>G√©n√©rez une image simple √† partir d'un prompt texte unique.</p>
        </div>
        
    </div>

    <div class="layout">
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">
                    <span class="icon">‚öôÔ∏è</span>
                    <div>
                        Param√®tres de g√©n√©ration
                        <div class="panel-sub">S√©lectionne un workflow, puis ajuste le prompt & param√®tres.</div>
                    </div>
                </div>
                <span class="pill">Mode : Affiche / Poster</span>
            </div>

            <form id="generation-form" onsubmit="startGeneration(event)">
                
                <div class="section" title="Le workflow (s√©quence de t√¢ches) √† ex√©cuter." style="display:none;">
                    <label>Workflow (obligatoire)</label>
                    <div class="workflow-carousel-wrapper">
                        <button type="button" class="carousel-btn left" id="workflow-carousel-left">‚Äπ</button>
                        <button type="button" class="carousel-btn right" id="workflow-carousel-right">‚Ä∫</button>
                        <div id="workflow-groups-container" class="workflow-groups-flex">
                            <span style="font-size:12px;color:#9ca3af;">Chargement des workflows‚Ä¶</span>
                        </div>
                    </div>
                    <input type="hidden" id="workflow-select" name="workflow" value="affiche.json" />
                </div>

                <div class="section" id="checkpoint-wrapper" title="Le mod√®le de base (Checkpoint) utilis√© pour la g√©n√©ration, si le workflow le supporte." style="display:none;">
                    <label for="checkpoint-select">Checkpoint (si le workflow utilise {{checkpoint}})</label>
                    <select id="checkpoint-select" name="checkpoint">
                        <option value="">Chargement des checkpoints‚Ä¶</option>
                    </select>
                </div>

                <div id="affiche-menu" class="section" style="display:block; margin-top:20px;">

                    <h3 style="margin-bottom:15px;">üé® G√©n√©rateur d‚ÄôAffiche Ludique</h3>

                    <button type="button" id="affiche-random-btn" 
                        class="btn-secondary btn-random-aff" 
                        style="margin-bottom:20px; width:100%; font-weight:600;">
                        üé≤ G√©n√©rer une affiche al√©atoire
                    </button>

                    <label for="aff_titre">Titre de l‚Äôaffiche (optionnel)</label>
                    <input id="aff_titre" type="text" placeholder="Ex : LA GRANDE AVENTURE" class="ui-input custom-field">

                    <label for="aff_sous_titre">Sous-titre (optionnel)</label>
                    <input id="aff_sous_titre" type="text" placeholder="Ex : Nuit magique, √©dition sp√©ciale‚Ä¶" class="ui-input">

                    <label for="aff_tagline">Tagline (texte en bas de l‚Äôaffiche ‚Äì optionnel)</label>
                    <input id="aff_tagline" type="text" placeholder="Ex : Une aventure inoubliable‚Ä¶" class="ui-input">


                    <label for="aff_theme" style="margin-top: 15px;">Occasion / Th√®me</label>
                    <div class="aff-controls-line">
                        <select id="aff_theme" class="ui-input menu-select">
                            <option value="">(S√©lectionner un th√®me)</option>
                            <option value="Anniversaire">Anniversaire</option>
                            <option value="No√´l">No√´l</option>
                            <option value="Halloween">Halloween</option>
                            <option value="Saint Nicolas">Saint Nicolas</option>
                            <option value="Nouvel an">Nouvel an</option>
                            <option value="Saint-Valentin">Saint-Valentin</option>
                            <option value="Carnaval">Carnaval</option>
                            <option value="P√¢ques">P√¢ques</option>
                            <option value="F√™te des m√®res">F√™te des m√®res</option>
                            <option value="F√™te des p√®res">F√™te des p√®res</option>
                            <option value="custom">Autre (Texte libre)</option>
                        </select>
                        <button type="button" class="btn-reset" data-target-id="aff_theme_custom" data-select-id="aff_theme" title="Effacer le champ personnalis√©">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h6"/><path d="M3 12a9 9 0 0 1 15-6l-3 3"/></svg>
                        </button>
                        <input id="aff_theme_custom" type="text" placeholder="Ou √©crire votre propre th√®me‚Ä¶" class="ui-input custom-input">
                    </div>


                    <label for="aff_ambiance" style="margin-top: 15px;">Ambiance g√©n√©rale</label>
                    <div class="aff-controls-line">
                        <select id="aff_ambiance" class="ui-input menu-select">
                            <option value="">(S√©lectionner une ambiance)</option>
                            <option value="festive et color√©e">festive et color√©e</option>
                            <option value="magique et lumineuse">magique et lumineuse</option>
                            <option value="sombre et myst√©rieuse">sombre et myst√©rieuse</option>
                            <option value="√©pique et dramatique">√©pique et dramatique</option>
                            <option value="humoristique et d√©cal√©e">humoristique et d√©cal√©e</option>
                            <option value="cosy et chaleureuse">cosy et chaleureuse</option>
                            <option value="futuriste et technologique">futuriste et technologique</option>
                            <option value="vintage ann√©es 80">vintage ann√©es 80</option>
                            <option value="f√©erique et enchant√©e">f√©erique et enchant√©e</option>
                            <option value="cartoon fun et exag√©r√©">cartoon fun et exag√©r√©</option>
                            <option value="custom">Autre (Texte libre)</option>
                        </select>
                        <button type="button" class="btn-reset" data-target-id="aff_ambiance_custom" data-select-id="aff_ambiance" title="Effacer le champ personnalis√©">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h6"/><path d="M3 12a9 9 0 0 1 15-6l-3 3"/></svg>
                        </button>
                        <input id="aff_ambiance_custom" type="text" placeholder="Ou √©crire une ambiance personnalis√©e‚Ä¶" class="ui-input custom-input">
                    </div>

                    <label for="aff_perso_sugg" style="margin-top: 15px;">Personnage principal</label>
                    <div class="aff-controls-line">
                        <select id="aff_perso_sugg" class="ui-input menu-select">
                            <option value="">(S√©lectionner un type)</option>
                            <option value="un enfant joyeux">un enfant joyeux</option>
                            <option value="un p√®re No√´l souriant">un p√®re No√´l souriant</option>
                            <option value="une sorci√®re amusante">une sorci√®re amusante</option>
                            <option value="un super-h√©ros dynamique">un super-h√©ros dynamique</option>
                            <option value="un animal mignon anthropomorphis√©">un animal mignon anthropomorphis√©</option>
                            <option value="un robot stylis√©">un robot stylis√©</option>
                            <option value="un monstre rigolo">un monstre rigolo</option>
                            <option value="une mascotte cartoon">une mascotte cartoon</option>
                            <option value="un guerrier √©pique">un guerrier √©pique</option>
                            <option value="une princesse magique">une princesse magique</option>
                            <option value="custom">Autre (Texte libre)</option>
                        </select>
                        <button type="button" class="btn-reset" data-target-id="aff_perso_desc" data-select-id="aff_perso_sugg" title="Effacer le champ personnalis√©">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h6"/><path d="M3 12a9 9 0 0 1 15-6l-3 3"/></svg>
                        </button>
                        <input id="aff_perso_desc" type="text" placeholder="Description personnelle (optionnel)" class="ui-input custom-input">
                    </div>

                    <label for="aff_env_sugg" style="margin-top: 15px;">Environnement</label>
                    <div class="aff-controls-line">
                        <select id="aff_env_sugg" class="ui-input menu-select">
                            <option value="">(S√©lectionner un lieu)</option>
                            <option value="un d√©cor enneig√©">un d√©cor enneig√©</option>
                            <option value="une salle de f√™te d√©cor√©e">une salle de f√™te d√©cor√©e</option>
                            <option value="un ch√¢teau hant√©">un ch√¢teau hant√©</option>
                            <option value="une sc√®ne de rue nocturne">une sc√®ne de rue nocturne</option>
                            <option value="un salon cosy √©clair√© aux bougies">un salon cosy √©clair√© aux bougies</option>
                            <option value="un paysage futuriste n√©on">un paysage futuriste n√©on</option>
                            <option value="une for√™t enchant√©e">une for√™t enchant√©e</option>
                            <option value="une ville miniature style maquette">une ville miniature style maquette</option>
                            <option value="une plage tropicale festive">une plage tropicale festive</option>
                            <option value="custom">Autre (Texte libre)</option>
                        </select>
                        <button type="button" class="btn-reset" data-target-id="aff_env_desc" data-select-id="aff_env_sugg" title="Effacer le champ personnalis√©">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h6"/><path d="M3 12a9 9 0 0 1 15-6l-3 3"/></svg>
                        </button>
                        <input id="aff_env_desc" type="text" placeholder="Description personnelle (optionnel)" class="ui-input custom-input">
                    </div>


                    <label for="aff_action_sugg" style="margin-top: 15px;">Action du personnage</label>
                    <div class="aff-controls-line">
                        <select id="aff_action_sugg" class="ui-input menu-select">
                            <option value="">(S√©lectionner une action)</option>
                            <option value="en train de danser joyeusement">en train de danser joyeusement</option>
                            <option value="en pleine course √©pique">en pleine course √©pique</option>
                            <option value="ouvrant un cadeau magique">ouvrant un cadeau magique</option>
                            <option value="en train de chanter sous la pluie">en train de chanter sous la pluie</option>
                            <option value="volant dans le ciel √©toil√©">volant dans le ciel √©toil√©</option>
                            <option value="en train de cuisiner des g√¢teaux">en train de cuisiner des g√¢teaux</option>
                            <option value="face √† un miroir magique">face √† un miroir magique</option>
                            <option value="custom">Autre (Texte libre)</option>
                        </select>
                        <button type="button" class="btn-reset" data-target-id="aff_action_desc" data-select-id="aff_action_sugg" title="Effacer le champ personnalis√©">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h6"/><path d="M3 12a9 9 0 0 1 15-6l-3 3"/></svg>
                        </button>
                        <input id="aff_action_desc" type="text" placeholder="Description personnelle (optionnel)" class="ui-input custom-input">
                    </div>


                    <label for="aff_palette" style="margin-top: 15px;">Palette de couleurs dominante</label>
                    <div class="aff-controls-line">
                        <select id="aff_palette" class="ui-input menu-select">
                            <option value="">(S√©lectionner une palette)</option>
                            <option value="tons vifs, rouge, vert et or">tons vifs, rouge, vert et or</option>
                            <option value="bleu nuit et argent froid">bleu nuit et argent froid</option>
                            <option value="tons pastel, rose et jaune doux">tons pastel, rose et jaune doux</option>
                            <option value="couleurs terre et feu orang√©">couleurs terre et feu orang√©</option>
                            <option value="monochrome bleu et violet">monochrome bleu et violet</option>
                            <option value="custom">Autre (Texte libre)</option>
                        </select>
                        <button type="button" class="btn-reset" data-target-id="aff_palette_custom" data-select-id="aff_palette" title="Effacer le champ personnalis√©">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h6"/><path d="M3 12a9 9 0 0 1 15-6l-3 3"/></svg>
                        </button>
                        <input id="aff_palette_custom" type="text" placeholder="Couleur personnalis√©e (optionnel)" class="ui-input custom-input">
                    </div>


                    <label for="aff_style_titre" style="margin-top: 15px;">Style de Typographie du Titre (CRITIQUE)</label>
                    <div class="aff-controls-line">
                        <select id="aff_style_titre" class="ui-input menu-select" name="aff_style_titre_select">
                            </select>
                        <button type="button" class="btn-reset" data-target-id="aff_style_titre_custom" data-select-id="aff_style_titre" title="Effacer le champ personnalis√©">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2v6h6"/><path d="M3 12a9 9 0 0 1 15-6l-3 3"/></svg>
                        </button>
                        <input type="text" id="aff_style_titre_custom" class="ui-input custom-input" placeholder="Style personnalis√© ou 'aleatoire' si non s√©lectionn√©...">
                    </div>


                    <label for="aff_details" style="margin-top: 15px;">D√©tails de rendu (ex: 'photo r√©aliste', 'dessin')</label>
                    <input id="aff_details" type="text" placeholder="Ex: 'photo r√©aliste', 'low poly', 'pastel', etc." class="ui-input">

                    <label for="aff_random_seed" style="margin-top: 15px;">Seed (Laissez vide pour Al√©atoire)</label>
                    <input type="number" id="aff_random_seed" name="aff_random_seed" placeholder="Ex: 12345" class="ui-input" />
                    
                    
                    <div id="affiche-generate-btn-wrapper" style="display: block; margin-top: 15px;">
                        <button type="submit" id="generate-button" class="btn-primary" style="width: 100%;">
                            <span class="dot"></span>D√©marrer la g√©n√©ration
                        </button>
                    </div>
                </div> <div id="image-menu" style="display:none;">

                    <div class="section">
                        <label for="prompt">Prompt (Texte)</label>
                        <textarea id="prompt-image-mode" name="prompt_image_mode" placeholder="D√©cris pr√©cis√©ment l‚Äôimage √† g√©n√©rer‚Ä¶" class="ui-input textarea"></textarea>
                    </div>

                    <div class="section">
                        <h4>Param√®tres</h4>
                        
                        <div id="group-sampler" style="margin-top: 10px;">
                            <label for="sampler">Sampler:</label>
                            <select id="sampler" name="sampler">
                                <option value="euler_a">euler_a</option>
                                <option value="euler">euler</option>
                                <option value="dpmpp_2m">dpmpp_2m</option>
                                <option value="dpmpp_2m_sde">dpmpp_2m_sde</option>
                                <option value="dpmpp_2s_a">dpmpp_2s_a</option>
                            </select>
                        </div>
                        
                        <div id="group-steps" style="margin-top: 10px;">
                            <label for="steps-slider">Steps: <span id="steps-value">30</span></label>
                            <input type="range" id="steps-slider" name="steps" min="10" max="100" value="30" />
                        </div>

                        <div id="group-cfg" style="margin-top: 10px;" title="Classifier Free Guidance. Contr√¥le la fid√©lit√© de l'image au prompt.">
                            <label for="cfg_scale-slider">CFG Scale: <span id="cfg_scale-value">7.0</span></label>
                            <input type="range" id="cfg_scale-slider" name="cfg_scale" min="1" max="20" step="0.5" value="7" />
                        </div>
                        
                        <div class="section" id="group-seed" style="margin-top: 10px;">
                            <label for="seed-input">Seed:</label>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <input type="number" id="seed-input" name="seed_value" value="42" style="flex-grow: 1;" class="ui-input" />
                                <input type="checkbox" id="seed-random-toggle" name="seed_random" style="width: auto; margin-left: 0;" />
                                <label for="seed-random-toggle" style="margin-left: -5px; display: flex; align-items: center; cursor: pointer;"> Al√©atoire ‚ÑπÔ∏è </label>
                            </div>
                        </div>

                        <div class="section">
                            <label>Format rapide</label>
                            <div class="quick-format-icons">
                                <span class="fmt-icon" data-w="1920" data-h="1080">üñ•Ô∏è</span>
                                <span class="fmt-icon" data-w="1080" data-h="1920">üì±</span>
                                <span class="fmt-icon" data-w="1080" data-h="1080">üñºÔ∏è</span>
                                <span class="fmt-icon" data-w="1536" data-h="640">‚ñ≠</span>
                            </div>
                            <div class="input-group-row" style="margin-top: 15px;">
                                <div class="input-group">
                                    <label for="width-input">Largeur</label>
                                    <input type="number" id="width-input" name="width" value="1080" class="ui-input" />
                                </div>
                                <div class="input-group">
                                    <label for="height-input">Hauteur</label>
                                    <input type="number" id="height-input" name="height" value="1080" class="ui-input" />
                                </div>
                            </div>
                        </div>

                        <div class="input-group" style="margin-top: 15px;">
                            <label for="sdxl_quality" title="D√©finit le nombre de steps par d√©faut.">Qualit√© globale</label>
                            <select id="sdxl_quality" class="ui-select">
                                <option value="normal">Normal</option>
                                <option value="high">Haute qualit√©</option>
                                <option value="ultra">Ultra</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" id="generate-button-image" class="btn-primary" style="width: 100%; margin-top: 15px; display: none;">
                        <span class="dot"></span>D√©marrer la g√©n√©ration (Mode Image)
                    </button>
                </div> </form>
            
            <div class="log-box" id="log-box"></div>
            <div id="error-box" class="error-text" style="display:none;"></div>

        </div> <div class="panel results-panel">
            <div id="status-card" class="section status-card">
                <div class="status-main">
                    <div class="status-title-group">
                        <span class="status-label">√âTAT DE LA T√ÇCHE</span>
                        <div id="job-status-pill" class="pill">READY</div>
                    </div>
                    <div class="status-details-grid">
                        <div class="status-detail">
                            <span class="detail-label">PROMPT ID:</span>
                            <strong id="job-id">‚Äì</strong>
                        </div>
                        <div class="status-detail">
                            <span class="detail-label">PROGRESSION:</span>
                            <strong id="job-progress">0%</strong>
                        </div>
                        <div class="status-detail">
                            <span class="detail-label">TEMPS ESTIM√â:</span>
                            <strong id="job-eta">‚Äì</strong>
                        </div>
                    </div>
                </div>
                <div id="status-progress-bar" class="progress-bar"></div>
            </div>

            <div id="affiche-generate-button-wrapper" style="margin-bottom: 12px; display: none;">
                <button type="button" id="affiche-generate-btn" class="btn-primary" style="width: 100%; font-weight: bold;">
                    ‚ú® G√©n√©rer le prompt de l‚Äôaffiche
                </button>
            </div>
            
            <div class="image-preview-wrapper" id="image-preview-wrapper">
                <img id="image-preview" src="" alt="Aper√ßu de l'image g√©n√©r√©e" class="image-preview" style="display:none;">
                <div id="placeholder-message" class="placeholder-message">
                    <p>Votre image g√©n√©r√©e appara√Ætra ici.</p>
                </div>
                <div id="download-group" class="download-group" style="display:none;">
                    <a id="download-link" href="#" download="generated_image.png" class="btn-secondary">
                        T√©l√©charger l'image
                    </a>
                </div>
            </div>

            <div class="section" id="meta-section">
                <h3 style="margin: 0 0 5px; font-size: 14px; color: var(--text);">Param√®tres (Info)</h3>
                <div id="metadata-display" class="metadata-grid">
                    <span title="Seed">Seed: <strong id="meta-seed">‚Äì</strong></span>
                    <span title="Steps">Steps: <strong id="meta-steps">‚Äì</strong></span>
                    <span title="CFG Scale">CFG: <strong id="meta-cfg">‚Äì</strong></span>
                    <span title="Sampler">Sampler: <strong id="meta-sampler">‚Äì</strong></span>
                    <button type="button" id="copy-params-btn" class="btn-copy-sm">üìã Copier</button>
                </div>
            </div>
            
            <div class="section" id="prompt-section" title="Le texte d√©crivant l'image que vous voulez g√©n√©rer. Soyez le plus pr√©cis possible;">
                <label for="prompt">Prompt</label>
                <textarea id="prompt" name="prompt" placeholder="D√©cris pr√©cis√©ment l‚Äôimage √† g√©n√©rer‚Ä¶" class="ui-input textarea"></textarea>
            </div>
        </div> </div> </div> <div id="image-modal" class="modal">
    <div class="modal-content">
        <span class="modal-close-btn">&times;</span>
        <img id="modal-image" src="" alt="Image en taille r√©elle" />
        <a id="modal-download-link" href="#" download class="btn-secondary" style="margin-top: 20px;">
            T√©l√©charger (Nom du fichier)
        </a>
    </div>
</div>

<div id="workflow-popover" class="workflow-popover">
    <div class="popover-content">
        <h4 id="popover-title">Nom du Workflow</h4>
        <div class="workflow-image-wrapper">
            <img id="popover-image" src="" alt="Aper√ßu du Workflow">
        </div>
        <p id="popover-description">Description du mod√®le...</p>
        <span class="popover-tip"></span>
    </div>
</div>

<div id="progress-overlay" class="progress-overlay" style="display:none;">
    <div class="spinner"></div>
    <p id="progress-message">Initialisation...</p>
</div>

<script src="script.js"></script>
</body>
</html>
