{
  "9": {
    "inputs": {
      "filename_prefix": "z-image",
      "images": ["43", 0]
    },
    "class_type": "SaveImage",
    "_meta": {
      "title": "Enregistrer Image",
      "output_node": true
    }
  },

  // ⚠️ NOUVEAU LOADER : Utilise un loader de checkpoint standard 
  "39": {
    "inputs": {
      // ⚠️ ASSUMONS que vous avez un checkpoint complet qui inclut le CLIP et le VAE
      "ckpt_name": "z_image_turbo_bf16.safetensors" 
    },
    "class_type": "CheckpointLoaderSimple",
    "_meta": { "title": "Load Checkpoint Simple (TEST)" }
  },

  // ⚠️ NOUVEAU LATENT : Utilise le nœud Latent standard pour éliminer le Custom Node SD3
  "41": {
    "inputs": {
      "width": "{{width}}",
      "height": "{{height}}",
      "batch_size": 1
    },
    "class_type": "EmptyLatentImage",
    "_meta": {
      "title": "Empty Latent Image (Standard)"
    }
  },

  // Ce nœud 42 (ConditioningZeroOut) est OK

  "43": {
    "inputs": {
      "samples": ["44", 0],
      "vae": ["39", 2] // ⚠️ Connecté au VAE du CheckpointLoader (sortie 2 du 39)
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE Decode"
    }
  },

  "44": {
    "inputs": {
      "seed": {{seed}}, // CORRECT
      "steps": 9,
      "cfg": 1,
      "sampler_name": "euler", // Sampler standard
      "scheduler": "simple",
      "denoise": 1,
      "model": ["39", 0], // ⚠️ Connecté au Modèle du CheckpointLoader (sortie 0 du 39)
      "positive": ["45", 0],
      "negative": ["42", 0],
      "latent_image": ["41", 0]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "KSampler"
    }
  },

  "45": {
    "inputs": {
      "text": "Ultra detailed cinematic poster... {{user_menu_prompt}}",
      "clip": ["39", 1] // ⚠️ Connecté au CLIP du CheckpointLoader (sortie 1 du 39)
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode"
    }
  }
  // Les nœuds 40, 46, 47 sont retirés ou remplacés par le nœud 39 CheckpointLoaderSimple.
}
